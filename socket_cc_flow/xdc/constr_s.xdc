create_clock -period 2.0 -name aclk -add [get_ports aclk]
#create_clock -period 2.5 -name aclk -add [get_ports aclk]

# 9.943 - 0.077
#set_clock_latency -source -max -late 9.866 [get_clocks aclk]
set_clock_latency -source -max -late 10.628 [get_clocks aclk]

# 8.706 - 0.065 
#set_clock_latency -source -min -early 8.641  [get_clocks aclk]
set_clock_latency -source -min -early 9.3  [get_clocks aclk]

#set_input_jitter [get_clocks aclk] 0.194

#set_clock_uncertainty -setup 0.020 [get_clocks -of_objects [get_pins design_1_i/mbufgce_primitive_0/clk_out_o1]]
#set_clock_uncertainty -setup 0.015 [get_clocks -of_objects [get_pins design_1_i/mbufgce_primitive_0/clk_out_o2]]

#set_clock_uncertainty -hold -0.034 [get_clocks -of_objects [get_pins design_1_i/mbufgce_primitive_0/clk_out_o1]]
#set_clock_uncertainty -hold -0.034 [get_clocks -of_objects [get_pins design_1_i/mbufgce_primitive_0/clk_out_o2]]

create_pblock pblock_util
#add_cells_to_pblock [get_pblocks pblock_util] [get_cells -quiet [list design_1_i/socket]]
# comment for sub
#add_cells_to_pblock [get_pblocks pblock_util] [get_cells -quiet [list design_1_i/mbufgce_primitive_0]]

#resize_pblock [get_pblocks pblock_util] -add {NOC_NSU512_X0Y2:NOC_NSU512_X0Y3}
#resize_pblock [get_pblocks pblock_util] -add {CLOCKREGION_X2Y2:CLOCKREGION_X3Y2}


create_pblock pblock_util0
add_cells_to_pblock [get_pblocks pblock_util0] [get_cells design_1_i/socket]
#add_cells_to_pblock [get_pblocks pblock_util0] [get_cells design_1_i/mbufgce_primitive_0]
#resize_pblock pblock_util0 -add {SLICE_X206Y96:SLICE_X235Y187 IRI_QUAD_X131Y412:IRI_QUAD_X147Y779 NOC_NMU512_X2Y2:NOC_NMU512_X2Y3 NOC_NSU512_X2Y2:NOC_NSU512_X2Y3}
resize_pblock pblock_util0 -add {SLICE_X206Y284:SLICE_X235Y327 IRI_QUAD_X131Y1164:IRI_QUAD_X147Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6}
#resize_pblock pblock_util0 -add {SLICE_X206Y284:SLICE_X237Y327 IRI_QUAD_X131Y1164:IRI_QUAD_X148Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6}
#resize_pblock pblock_util0 -add {SLICE_X208Y284:SLICE_X235Y327 IRI_QUAD_X132Y1164:IRI_QUAD_X147Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6}

#resize_pblock pblock_util0 -add {SLICE_X206Y284:SLICE_X239Y327 IRI_QUAD_X131Y1164:IRI_QUAD_X149Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6}
#resize_pblock pblock_util0 -add {SLICE_X206Y236:SLICE_X235Y283 IRI_QUAD_X131Y972:IRI_QUAD_X147Y1163 NOC_NMU512_X2Y5:NOC_NMU512_X2Y5 NOC_NSU512_X2Y5:NOC_NSU512_X2Y5}

resize_pblock pblock_util0 -add {BUFGCE_X4Y0:BUFGCE_X4Y23}

#resize_pblock pblock_util0 -add {BUFDIV_LEAF_X74Y64:BUFDIV_LEAF_X74Y95}

#w=1,h=1
#resize_pblock pblock_util -add {SLICE_X166Y96:SLICE_X235Y187 DSP58_CPLX_X2Y48:DSP58_CPLX_X3Y93 DSP_X4Y48:DSP_X7Y93 IRI_QUAD_X103Y412:IRI_QUAD_X147Y779 NOC_NMU512_X2Y2:NOC_NMU512_X2Y3 NOC_NSU512_X2Y2:NOC_NSU512_X2Y3 RAMB18_X5Y50:RAMB18_X7Y95 RAMB36_X5Y25:RAMB36_X7Y47 URAM288_X3Y25:URAM288_X3Y47 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X3Y1} -remove {SLICE_X166Y92:SLICE_X235Y187 DSP58_CPLX_X2Y46:DSP58_CPLX_X3Y93 DSP_X4Y46:DSP_X7Y93 IRI_QUAD_X103Y396:IRI_QUAD_X147Y779 NOC_NMU512_X2Y2:NOC_NMU512_X2Y3 NOC_NSU512_X2Y2:NOC_NSU512_X2Y3 RAMB18_X5Y48:RAMB18_X7Y95 RAMB36_X5Y24:RAMB36_X7Y47 URAM288_X3Y24:URAM288_X3Y47 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X3Y1} -locs keep_all

resize_pblock pblock_util -add {SLICE_X166Y284:SLICE_X235Y327 DSP58_CPLX_X2Y142:DSP58_CPLX_X3Y163 DSP_X4Y142:DSP_X7Y163 IRI_QUAD_X103Y1164:IRI_QUAD_X147Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6 RAMB18_X5Y144:RAMB18_X7Y165 RAMB36_X5Y72:RAMB36_X7Y82 URAM288_X3Y72:URAM288_X3Y82}
#resize_pblock pblock_util -add {SLICE_X168Y284:SLICE_X237Y327 DSP58_CPLX_X2Y142:DSP58_CPLX_X3Y163 DSP_X4Y142:DSP_X7Y163 IRI_QUAD_X104Y1164:IRI_QUAD_X148Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6 RAMB18_X5Y144:RAMB18_X7Y165 RAMB36_X5Y72:RAMB36_X7Y82 URAM288_X3Y72:URAM288_X3Y82}

#resize_pblock pblock_util -add {SLICE_X168Y284:SLICE_X239Y327 DSP58_CPLX_X2Y142:DSP58_CPLX_X3Y163 DSP_X4Y142:DSP_X7Y163 IRI_QUAD_X104Y1164:IRI_QUAD_X149Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6 RAMB18_X5Y144:RAMB18_X7Y165 RAMB36_X5Y72:RAMB36_X7Y82 URAM288_X3Y72:URAM288_X3Y82}

#resize_pblock pblock_util -add {SLICE_X166Y236:SLICE_X235Y283 DSP58_CPLX_X2Y118:DSP58_CPLX_X3Y141 DSP_X4Y118:DSP_X7Y141 IRI_QUAD_X103Y972:IRI_QUAD_X147Y1163 NOC_NMU512_X2Y5:NOC_NMU512_X2Y5 NOC_NSU512_X2Y5:NOC_NSU512_X2Y5 RAMB18_X5Y120:RAMB18_X7Y143 RAMB36_X5Y60:RAMB36_X7Y71 URAM288_X3Y60:URAM288_X3Y71 URAM_CAS_DLY_X3Y2:URAM_CAS_DLY_X3Y2}

#w=2,h=1
#resize_pblock pblock_util -add {SLICE_X166Y96:SLICE_X307Y187 DSP58_CPLX_X2Y48:DSP58_CPLX_X5Y93 DSP_X4Y48:DSP_X11Y93 IRI_QUAD_X103Y412:IRI_QUAD_X193Y779 NOC_NMU512_X2Y2:NOC_NMU512_X3Y3 NOC_NSU512_X2Y2:NOC_NSU512_X3Y3 RAMB18_X5Y50:RAMB18_X10Y95 RAMB36_X5Y25:RAMB36_X10Y47 URAM288_X3Y25:URAM288_X4Y47 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X4Y1} -remove {SLICE_X166Y96:SLICE_X235Y187 DSP58_CPLX_X2Y48:DSP58_CPLX_X3Y93 DSP_X4Y48:DSP_X7Y93 IRI_QUAD_X103Y412:IRI_QUAD_X147Y779 NOC_NMU512_X2Y2:NOC_NMU512_X2Y3 NOC_NSU512_X2Y2:NOC_NSU512_X2Y3 RAMB18_X5Y50:RAMB18_X7Y95 RAMB36_X5Y25:RAMB36_X7Y47 URAM288_X3Y25:URAM288_X3Y47 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X3Y1} -locs keep_all

#w=1,h=2
#resize_pblock pblock_util -add {SLICE_X166Y96:SLICE_X235Y283 DSP58_CPLX_X2Y48:DSP58_CPLX_X3Y141 DSP_X4Y48:DSP_X7Y141 IRI_QUAD_X103Y412:IRI_QUAD_X147Y1163 NOC_NMU512_X2Y2:NOC_NMU512_X2Y5 NOC_NSU512_X2Y2:NOC_NSU512_X2Y5 RAMB18_X5Y50:RAMB18_X7Y143 RAMB36_X5Y25:RAMB36_X7Y71 URAM288_X3Y25:URAM288_X3Y71 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X3Y2} -remove {SLICE_X166Y96:SLICE_X307Y283 DSP58_CPLX_X2Y48:DSP58_CPLX_X5Y141 DSP_X4Y48:DSP_X11Y141 IRI_QUAD_X103Y412:IRI_QUAD_X193Y1163 NOC_NMU512_X2Y2:NOC_NMU512_X3Y5 NOC_NSU512_X2Y2:NOC_NSU512_X3Y5 RAMB18_X5Y50:RAMB18_X10Y143 RAMB36_X5Y25:RAMB36_X10Y71 URAM288_X3Y25:URAM288_X4Y71 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X4Y2} -locs keep_all

#w=1,h=3
#resize_pblock pblock_util -add {SLICE_X166Y0:SLICE_X235Y283 DSP58_CPLX_X2Y0:DSP58_CPLX_X3Y141 DSP_X4Y0:DSP_X7Y141 IRI_QUAD_X103Y28:IRI_QUAD_X147Y1163 NOC_NMU512_X2Y0:NOC_NMU512_X2Y5 NOC_NSU512_X2Y0:NOC_NSU512_X2Y5 RAMB18_X5Y2:RAMB18_X7Y143 RAMB36_X5Y1:RAMB36_X7Y71 URAM288_X3Y1:URAM288_X3Y71 URAM_CAS_DLY_X3Y0:URAM_CAS_DLY_X3Y2} -remove {SLICE_X166Y0:SLICE_X235Y283 DSP58_CPLX_X2Y0:DSP58_CPLX_X3Y141 DSP_X4Y0:DSP_X7Y141 IRI_QUAD_X103Y0:IRI_QUAD_X147Y1163 NOC_NMU512_X2Y0:NOC_NMU512_X2Y5 NOC_NSU512_X2Y0:NOC_NSU512_X2Y5 RAMB18_X5Y0:RAMB18_X7Y143 RAMB36_X5Y0:RAMB36_X7Y71 URAM288_X3Y0:URAM288_X3Y71 URAM_CAS_DLY_X3Y0:URAM_CAS_DLY_X3Y2} -locs keep_all

#w=3,h=1
#resize_pblock pblock_util -add {SLICE_X94Y96:SLICE_X307Y187 DSP58_CPLX_X0Y48:DSP58_CPLX_X5Y93 DSP_X0Y48:DSP_X11Y93 IRI_QUAD_X57Y412:IRI_QUAD_X193Y779 NOC_NMU512_X1Y2:NOC_NMU512_X3Y3 NOC_NSU512_X1Y2:NOC_NSU512_X3Y3 RAMB18_X2Y50:RAMB18_X10Y95 RAMB36_X2Y25:RAMB36_X10Y47 URAM288_X2Y25:URAM288_X4Y47 URAM_CAS_DLY_X2Y1:URAM_CAS_DLY_X4Y1} -remove {SLICE_X96Y96:SLICE_X307Y187 DSP58_CPLX_X0Y48:DSP58_CPLX_X5Y93 DSP_X0Y48:DSP_X11Y93 IRI_QUAD_X58Y412:IRI_QUAD_X193Y779 NOC_NMU512_X1Y2:NOC_NMU512_X3Y3 NOC_NSU512_X1Y2:NOC_NSU512_X3Y3 RAMB18_X2Y50:RAMB18_X10Y95 RAMB36_X2Y25:RAMB36_X10Y47 URAM288_X2Y25:URAM288_X4Y47 URAM_CAS_DLY_X2Y1:URAM_CAS_DLY_X4Y1} -locs keep_all

#w=2,h=2
#resize_pblock pblock_util -add {SLICE_X166Y96:SLICE_X307Y283 DSP58_CPLX_X2Y48:DSP58_CPLX_X5Y141 DSP_X4Y48:DSP_X11Y141 IRI_QUAD_X103Y412:IRI_QUAD_X193Y1163 NOC_NMU512_X2Y2:NOC_NMU512_X3Y5 NOC_NSU512_X2Y2:NOC_NSU512_X3Y5 RAMB18_X5Y50:RAMB18_X10Y143 RAMB36_X5Y25:RAMB36_X10Y71 URAM288_X3Y25:URAM288_X4Y71 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X4Y2} -remove {SLICE_X166Y96:SLICE_X307Y281 DSP58_CPLX_X2Y48:DSP58_CPLX_X5Y140 DSP_X4Y48:DSP_X11Y140 IRI_QUAD_X103Y412:IRI_QUAD_X193Y1155 NOC_NMU512_X2Y2:NOC_NMU512_X3Y5 NOC_NSU512_X2Y2:NOC_NSU512_X3Y5 RAMB18_X5Y50:RAMB18_X10Y141 RAMB36_X5Y25:RAMB36_X10Y70 URAM288_X3Y25:URAM288_X4Y70 URAM_CAS_DLY_X3Y1:URAM_CAS_DLY_X4Y1} -locs keep_all

# w=1,h=1 (sub)
#resize_pblock pblock_util -add {BUFDIV_LEAF_X58Y192:BUFDIV_LEAF_X83Y223}
#resize_pblock pblock_util -add {SLICE_X166Y284:SLICE_X235Y327 DSP58_CPLX_X2Y142:DSP58_CPLX_X3Y163 DSP_X4Y142:DSP_X7Y163 IRI_QUAD_X103Y1164:IRI_QUAD_X147Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6 RAMB18_X5Y144:RAMB18_X7Y165 RAMB36_X5Y72:RAMB36_X7Y82 URAM288_X3Y72:URAM288_X3Y82} -remove {SLICE_X166Y285:SLICE_X235Y327 DSP58_CPLX_X2Y143:DSP58_CPLX_X3Y163 DSP_X4Y143:DSP_X7Y163 IRI_QUAD_X103Y1168:IRI_QUAD_X147Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X2Y6 NOC_NSU512_X2Y6:NOC_NSU512_X2Y6 RAMB18_X5Y146:RAMB18_X7Y165 RAMB36_X5Y73:RAMB36_X7Y82 URAM288_X3Y73:URAM288_X3Y82} -locs keep_all
# for CLR_B: SLICE_X166Y327

# w=2,h=1 (2xsub)
#resize_pblock pblock_util -add {BUFDIV_LEAF_X58Y192:BUFDIV_LEAF_X109Y223}
#resize_pblock pblock_util -add {SLICE_X166Y284:SLICE_X307Y327 DSP58_CPLX_X2Y142:DSP58_CPLX_X5Y163 DSP_X4Y142:DSP_X11Y163 IRI_QUAD_X103Y1164:IRI_QUAD_X193Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X3Y6 NOC_NSU512_X2Y6:NOC_NSU512_X3Y6 RAMB18_X5Y144:RAMB18_X10Y165 RAMB36_X5Y72:RAMB36_X10Y82 URAM288_X3Y72:URAM288_X4Y82} -remove {SLICE_X166Y284:SLICE_X303Y327 DSP58_CPLX_X2Y142:DSP58_CPLX_X5Y163 DSP_X4Y142:DSP_X11Y163 IRI_QUAD_X103Y1164:IRI_QUAD_X191Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X3Y6 NOC_NSU512_X2Y6:NOC_NSU512_X3Y6 RAMB18_X5Y144:RAMB18_X10Y165 RAMB36_X5Y72:RAMB36_X10Y82 URAM288_X3Y72:URAM288_X4Y82} -locs keep_all
# for CLR_B: SLICE_X166Y327

# w=3,h=1 (3xsub)
#resize_pblock pblock_util -add {BUFDIV_LEAF_X32Y192:BUFDIV_LEAF_X109Y223}
#resize_pblock pblock_util -add {SLICE_X94Y284:SLICE_X307Y327 DSP58_CPLX_X0Y142:DSP58_CPLX_X5Y163 DSP_X0Y142:DSP_X11Y163 IRI_QUAD_X57Y1164:IRI_QUAD_X193Y1339 NOC_NMU512_X1Y6:NOC_NMU512_X3Y6 NOC_NSU512_X1Y6:NOC_NSU512_X3Y6 RAMB18_X2Y144:RAMB18_X10Y165 RAMB36_X2Y72:RAMB36_X10Y82 URAM288_X2Y72:URAM288_X4Y82} -remove {SLICE_X166Y284:SLICE_X307Y327 DSP58_CPLX_X2Y142:DSP58_CPLX_X5Y163 DSP_X4Y142:DSP_X11Y163 IRI_QUAD_X103Y1164:IRI_QUAD_X193Y1339 NOC_NMU512_X2Y6:NOC_NMU512_X3Y6 NOC_NSU512_X2Y6:NOC_NSU512_X3Y6 RAMB18_X5Y144:RAMB18_X10Y165 RAMB36_X5Y72:RAMB36_X10Y82 URAM288_X3Y72:URAM288_X4Y82} -locs keep_all
# for CLR_B: SLICE_X94Y327/H6LUT

#resize_pblock pblock_util -add {BUFDIV_LEAF_X58Y64:BUFDIV_LEAF_X58Y95}
resize_pblock pblock_util -add {BUFGCE_X4Y0:BUFGCE_X4Y23}

set_property IS_SOFT FALSE [get_pblocks pblock_util]

set_property -dict {LOC NOC_NMU512_X2Y6} [get_cells design_1_i/socket/axi_noc_0/inst/S00_AXI_nmu/bd_*_S00_AXI_nmu_0_top_INST/NOC_NMU512_INST]
set_property -dict {LOC NOC_NSU512_X2Y6} [get_cells design_1_i/socket/axi_noc_0/inst/M00_AXI_nsu/bd_*_M00_AXI_nsu_0_top_INST/NOC_NSU512_INST]
# for w=1,h=3
#set_property -dict {LOC NOC_NMU512_X2Y0} [get_cells design_1_i/socket/axi_noc_0/inst/S00_AXI_nmu/bd_*_S00_AXI_nmu_0_top_INST/NOC_NMU512_INST]
##set_property -dict {LOC NOC_NMU512_X2Y1} [get_cells design_1_i/socket/axi_noc_0/inst/S01_AXI_nmu/bd_*_S01_AXI_nmu_0_top_INST/NOC_NMU512_INST]
#set_property -dict {LOC NOC_NMU512_X2Y2} [get_cells design_1_i/socket/axi_noc_0/inst/S01_AXI_nmu/bd_*_S01_AXI_nmu_0_top_INST/NOC_NMU512_INST]
#set_property -dict {LOC NOC_NSU512_X2Y0} [get_cells design_1_i/socket/axi_noc_0/inst/M00_AXI_nsu/bd_*_M00_AXI_nsu_0_top_INST/NOC_NSU512_INST]
# for sub
#set_property -dict {LOC NOC_NMU512_X2Y6} [get_cells design_1_i/socket/axi_noc_0/inst/S00_AXI_nmu/bd_*_S00_AXI_nmu_0_top_INST/NOC_NMU512_INST]
#set_property -dict {LOC NOC_NMU512_X1Y6} [get_cells design_1_i/socket/axi_noc_0/inst/S01_AXI_nmu/bd_*_S01_AXI_nmu_0_top_INST/NOC_NMU512_INST]
#set_property -dict {LOC NOC_NSU512_X2Y6} [get_cells design_1_i/socket/axi_noc_0/inst/M00_AXI_nsu/bd_*_M00_AXI_nsu_0_top_INST/NOC_NSU512_INST]

set_property CONTAIN_ROUTING 1 [get_pblocks pblock_util]
set_property CONTAIN_ROUTING 1 [get_pblocks pblock_util0]

#create_pblock pblock_intf
##resize_pblock pblock_intf -add SLICE_X206Y292:SLICE_X209Y315
#resize_pblock pblock_intf -add SLICE_X206Y292:SLICE_X213Y315
#add_cells_to_pblock [get_pblocks pblock_intf] [get_cells design_1_i/socket/socket_top_0/inst/rg_cl_intf_pipe]
